<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hospital Management System</title>

<style>
    body { background:#0f172a; color:white; font-family:Arial; }
    .container { max-width:800px; margin:auto; padding:20px; }
    h1 { text-align:center; color:#38bdf8; }
    .card { background:#1e293b; padding:20px; border-radius:10px; }
    input { width:100%; padding:10px; margin-top:10px; border-radius:8px; border:none; background:#334155; color:white; }
    button { width:100%; padding:12px; margin-top:15px; background:#38bdf8; border:none; color:black; border-radius:8px; font-weight:bold; }
    #output { margin-top:20px; background:#1e293b; padding:20px; border-radius:10px; white-space:pre-line; }
</style>
</head>

<body>

<div class="container">
    <h1>Hospital Management System (MongoDB)</h1>

    <div class="card">
        <input type="text" id="name" placeholder="Patient Name">
        <input type="number" id="age" placeholder="Age">
        <input type="text" id="disease" placeholder="Disease">

        <button onclick="addPatient()">Add Patient</button>
        <button onclick="viewPatient()">View Patient</button>
        <button onclick="listPatients()">List All Patients</button>
    </div>

    <div id="output">Output will appear here...</div>
</div>

<script>
    const API = "http://localhost:5000";

    async function addPatient() {
        const name = document.getElementById("name").value;
        const age = document.getElementById("age").value;
        const disease = document.getElementById("disease").value;

        let res = await fetch(`${API}/add`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, age, disease })
        });

        let data = await res.json();
        document.getElementById("output").innerText = data.message;
    }

    async function viewPatient() {
        let id = prompt("Enter patient MongoDB ID:");

        let res = await fetch(`${API}/view/${id}`);
        let data = await res.json();

        if (data.status === "error")
            alert(data.message);
        else
            document.getElementById("output").innerText =
                `ID: ${data._id}\nName: ${data.name}\nAge: ${data.age}\nDisease: ${data.disease}`;
    }

    async function listPatients() {
        let res = await fetch(`${API}/list`);
        let data = await res.json();

        let out = "";
        data.forEach(p => {
            out += `ID: ${p._id}\nName: ${p.name}\nAge: ${p.age}\nDisease: ${p.disease}\n\n`;
        });

        document.getElementById("output").innerText = out || "No patients found.";
    }
</script>
</body>
</html>
